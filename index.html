<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Details</title>
    <link rel="stylesheet" href="./style.css">
</head>

<body>
    <div class="search">
        <input type="text" name="movie" id="movie">
        <button onclick="getUser()">Search</button>

    </div>

    <div id="showList">

    </div>
</body>
<script>


    var key = '3a0a21f9923f5784f52211f34862c067';
    var baseURL = 'https://api.themoviedb.org/3/search/movie';


    function findMovie(event) {
        event.preventDefault();

        var movie = document.getElementById('movie').value;
        console.log('Movie = ', movie);

        var url = `${baseURL}?api_key=${key}&query=${movie}`;

        console.log(url);
    }

    async function getUser() {

        // Making an API call (request)
        // and getting the response back

        var movie = document.getElementById('movie').value;

        var url = `${baseURL}?api_key=${key}&query=${movie}`;
        console.log(url);

        const response = await fetch(url);

        // Parsing it to JSON format
        const data = await response.json();
        console.log(data.results);

        console.log(data.results[0].backdrop_path);
        console.log(baseURL + data.results[0].poster_path);

        var string = '';

        for (var i = 0; i < data.results.length; i++) {

            if (data.results[i].poster_path) {
                var imgsrc = "https://image.tmdb.org/t/p/w500" + data.results[i].poster_path;

                string += "<div style='border:1px solid black;padding:20px;width:80%;margin:auto;margin-top: 30px;height: 100%;height:300px;'>"
                    + "<img src=" + imgsrc + " style='margin-right:20px;width:200px;height:280px;'><br>"
                    + "<h2>" + data.results[i].original_title + "</h2><br>"
                    + "<i>Released on " + data.results[i].release_date + "</i><br>"
                    + "<p>" + data.results[i].overview + "</p><br>"
                    + "<span>Views: " + data.results[i].popularity + "</span><br>"
                    + "<span>Rating: " + data.results[i].vote_average + "</span></div>";

                console.log(data.results[i].original_title);
            }

        }

        document.getElementById('showList').innerHTML = string;



        // Retrieving data from JSON
        //const user = data.results[0];

        /*let fullName = title + ". " + first + " " + last;
        document.title = fullName;
     
        // Accessing the div container and modify/add
        // elements to the containers
        document.getElementById("head").innerHTML = fullName;
        document.getElementById("email").href = "mailto:" + email;
        document.getElementById("email").innerHTML = email;
        document.getElementById("phone").href = "tel:" + phone;
        document.getElementById("phone").innerHTML = phone;
        // accessing the span container
        document.querySelector("#age").textContent = age;
        document.querySelector("#gender").textContent = gender;
     
        document.querySelector("#location").textContent
                = city + ", " + state;
     
        document.querySelector("#country").textContent = country;
     
        // Creating a new element and appending it
        // to previously created containers
        let img = document.createElement("img");
        let img_div = document.getElementById("user-img");
        img.src = image;
        img_div.append(img);
     
        const favicon = document.getElementById("favicon");
        favicon.setAttribute("href", image_icon);*/
    }




</script>

</html>